(this.webpackJsonpenergyui=this.webpackJsonpenergyui||[]).push([[0],{101:function(t,e,a){},102:function(t,e,a){},104:function(t,e,a){},109:function(t,e,a){},110:function(t,e,a){},111:function(t,e,a){},112:function(t,e,a){},114:function(t,e,a){"use strict";a.r(e);var s=a(0),l=a.n(s),n=a(23),c=a.n(n),o=(a(101),a(102),a(51)),r=a.n(o),i=a(9),b=a(69),d=(a(104),a(184)),u=a(185),j=a(188),_=a(186),h=a(179),O=a(180),m=a(187),x=a(181),g=a(2);d.a;function v(t){return f.apply(this,arguments)}function f(){return(f=Object(b.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Credentials:",e),t.next=3,fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).catch((function(t){return console.log("ERROR:",t)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){var a=t.setToken;console.log("CUSTOM",e),e.length>0&&a(e);var n=Object(s.useState)(),c=Object(i.a)(n,2),o=c[0],d=c[1],f=Object(s.useState)(),p=Object(i.a)(f,2),C=p[0],N=p[1],k=null,D=!1,y=l.a.useState(null),T=Object(i.a)(y,2),w=T[0],S=T[1],E=function(){var t=Object(b.a)(r.a.mark((function t(e){var s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,v({EmailAddress:o,PasswordHash:C});case 3:k=t.sent,(null===(s=k)||void 0===s?void 0:s.UserID)||(D=!0),a(k);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=Boolean(w)&&D,A=M?"simple-popover":void 0;return Object(g.jsxs)(u.a,{sx:{minWidth:400},className:"login-card",children:[Object(g.jsxs)(_.a,{className:"card-content",children:[Object(g.jsx)("h1",{className:"card-parent-title",children:"Energy Management Dashboard"}),Object(g.jsx)("p",{className:"card-title",children:"Enter your email and password below"}),Object(g.jsxs)("form",{onSubmit:E,children:[Object(g.jsxs)("label",{className:"label-content",children:[Object(g.jsx)("p",{className:"text-field-title",children:"Email"}),Object(g.jsx)(h.a,{id:"outlined-email-input",type:"text",autoComplete:"current-email",className:"text-field",onChange:function(t){return d(t.target.value)}})]}),Object(g.jsxs)("label",{className:"label-content",children:[Object(g.jsx)("p",{className:"text-field-title",children:"Password"}),Object(g.jsx)(h.a,{id:"outlined-password-input",type:"password",autoComplete:"current-password",className:"text-field",onChange:function(t){return N(t.target.value)}})]}),Object(g.jsxs)("div",{className:"card-bottom",children:[Object(g.jsx)(x.a,{className:"card-submit",type:"submit",variant:"contained",onClick:function(t){S(t.currentTarget)},"aria-describedby":A,children:"Log In"}),Object(g.jsx)(O.a,{id:A,open:M,anchorEl:w,onClose:function(){S(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(g.jsx)(m.a,{sx:{p:2},children:"User email or password does not exist"})})]})]})]}),Object(g.jsx)(j.a,{children:Object(g.jsxs)("p",{className:"card-sign-up",children:["Don't have an account? ",Object(g.jsx)("span",{className:"sign-up-text",children:"Sign Up!"})]})})]})}a(109);var C=a(178),N=(a(110),a(79)),k=a.n(N);function D(t){var e=t.setToken,a=Object(s.useRef)(null),l=function(t,e){var a=Object(s.useState)(e),l=Object(i.a)(a,2),n=l[0],c=l[1];return Object(s.useEffect)((function(){var e=function(e){null===t.current||t.current.contains(e.target)||c(!n)};return n&&window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[n,t]),[n,c]}(a,!1),n=Object(i.a)(l,2),c=n[0],o=n[1];return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"menu-container",children:[Object(g.jsx)("button",{onClick:function(){return o(!c)},className:"menu-trigger",children:Object(g.jsx)(k.a,{style:{color:"#C5C7CD"}})}),Object(g.jsx)("nav",{ref:a,className:"menu ".concat(c?"active":"inactive"),children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"#",children:"Messages"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"#",children:"Settings"})}),Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"#",onClick:function(){e(null)},children:"Logout"})})]})})]})})}var y=a(80),T=a.n(y);function w(t){var e;return console.log("HEADER:",t,"CHECK:",t.userData),Object(g.jsxs)(C.a,{className:"toolbar",children:[Object(g.jsx)("h2",{className:"title-text",children:"Energy Use Overview"}),Object(g.jsxs)("div",{className:"toolbar-content",children:[Object(g.jsx)(T.a,{style:{color:"#C5C7CD"}}),Object(g.jsx)("div",{className:"break-line"}),Object(g.jsxs)("span",{className:"welcome-text",children:["Hello, ",null===(e=t.userData)||void 0===e?void 0:e.FirstName]}),Object(g.jsx)(D,{setToken:t.setToken})]})]})}var S=a(56),E=a(57),M=a(59),A=a(84),P=a(82),U=(a(111),function(t){return Object(g.jsx)("div",{className:"card-container"})}),F=(a(112),a(182)),I=["January","February","March","April","May","June","July","August","September","October","November","December"],J=12,L=6,R=3,W=1;function H(t){return[function(t){var e=0;return{price:"$"+$(t,J)+" Past Year",savings:e.toString()+"%",data:{labels:[Y(t[12].base.bill_statement_date),Y(t[11].base.bill_statement_date),Y(t[10].base.bill_statement_date),Y(t[9].base.bill_statement_date),Y(t[8].base.bill_statement_date),Y(t[7].base.bill_statement_date),Y(t[6].base.bill_statement_date),Y(t[5].base.bill_statement_date),Y(t[4].base.bill_statement_date),Y(t[3].base.bill_statement_date),Y(t[2].base.bill_statement_date),Y(t[1].base.bill_statement_date),Y(t[0].base.bill_statement_date)],datasets:[{label:"",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[t[12].base.bill_total_cost,t[11].base.bill_total_cost,t[10].base.bill_total_cost,t[9].base.bill_total_cost,t[8].base.bill_total_cost,t[7].base.bill_total_cost,t[6].base.bill_total_cost,t[5].base.bill_total_cost,t[4].base.bill_total_cost,t[3].base.bill_total_cost,t[2].base.bill_total_cost,t[1].base.bill_total_cost,t[0].base.bill_total_cost]}]}}}(t),function(t){var e=function(t){var e=t[0].base.bill_total_cost+t[1].base.bill_total_cost+t[2].base.bill_total_cost+t[3].base.bill_total_cost+t[4].base.bill_total_cost+t[5].base.bill_total_cost,a=t[6].base.bill_total_cost+t[7].base.bill_total_cost+t[8].base.bill_total_cost+t[9].base.bill_total_cost+t[10].base.bill_total_cost+t[11].base.bill_total_cost;return(e-a)/e*100}(t);return{price:"$"+$(t,L)+" Past 6 Months",savings:e.toString()+"%",data:{labels:[Y(t[6].base.bill_statement_date),Y(t[5].base.bill_statement_date),Y(t[4].base.bill_statement_date),Y(t[3].base.bill_statement_date),Y(t[2].base.bill_statement_date),Y(t[1].base.bill_statement_date),Y(t[0].base.bill_statement_date)],datasets:[{label:"",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[t[6].base.bill_total_cost,t[5].base.bill_total_cost,t[4].base.bill_total_cost,t[3].base.bill_total_cost,t[2].base.bill_total_cost,t[1].base.bill_total_cost,t[0].base.bill_total_cost]}]}}}(t),function(t){var e=function(t){var e=t[0].base.bill_total_cost+t[1].base.bill_total_cost+t[2].base.bill_total_cost+t[3].base.bill_total_cost,a=t[3].base.bill_total_cost+t[4].base.bill_total_cost+t[5].base.bill_total_cost+t[6].base.bill_total_cost;return(e-a)/e*100}(t);return{price:"$"+$(t,R)+" Past 3 Months",savings:e.toString()+"%",data:{labels:[Y(t[3].base.bill_statement_date),Y(t[2].base.bill_statement_date),Y(t[1].base.bill_statement_date),Y(t[0].base.bill_statement_date)],datasets:[{label:"",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[t[3].base.bill_total_cost,t[2].base.bill_total_cost,t[1].base.bill_total_cost,t[0].base.bill_total_cost]}]}}}(t),function(t){var e=function(t){return(t[0].base.bill_total_cost-t[1].base.bill_total_cost)/t[0].base.bill_total_cost*100}(t);return{price:"$"+$(t,W)+" Past Month",savings:e.toString()+"%",data:{labels:[Y(t[1].base.bill_statement_date),Y(t[0].base.bill_statement_date)],datasets:[{label:"",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[t[1].base.bill_total_cost,t[0].base.bill_total_cost]}]}}}(t)]}function Y(t){var e=new Date(t);return I[e.getMonth()]+" "+e.getFullYear()}function $(t,e){var a=0;return t.forEach((function(t,s){s<e&&(a+=t.base.bill_total_cost)})),parseFloat(a.toFixed(2)).toString()}var z=function(t){Object(A.a)(a,t);var e=Object(P.a)(a);function a(t){var s;return Object(S.a)(this,a),console.log("DASH PROPS:",t),(s=e.call(this,t)).state={index:0},s.parentToChild=s.parentToChild.bind(Object(M.a)(s)),console.log("ENERGYDATA:",s.getEnergyData(s.props.userData.EnergyData)),s}return Object(E.a)(a,[{key:"parentToChild",value:function(t){t,this.setState({index:t})}},{key:"getEnergyData",value:function(t){return H(t)}},{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"Dashboard",children:[Object(g.jsxs)("div",{className:"dashboard-header",children:[Object(g.jsxs)("strong",{className:"header-price",children:[Object(g.jsx)("span",{children:"Total Cost: "}),this.getEnergyData(this.props.userData.EnergyData)[this.state.index].price]}),Object(g.jsx)("div",{className:"button-group",children:Object(g.jsxs)(F.a,{size:"small","aria-label":"small button group",children:[Object(g.jsx)(F.a,{onClick:function(){return t.parentToChild(3)},children:"1M"}),Object(g.jsx)(F.a,{onClick:function(){return t.parentToChild(2)},children:"3M"}),Object(g.jsx)(F.a,{onClick:function(){return t.parentToChild(1)},children:"6M"}),Object(g.jsx)(F.a,{onClick:function(){return t.parentToChild(0)},children:"1Y"})]})})]}),Object(g.jsx)(u.a,{className:"card-dashboard",children:Object(g.jsx)(_.a,{children:Object(g.jsx)("div",{className:"content",children:Object(g.jsx)("div",{className:"chart-card",children:Object(g.jsx)(U,{energy:this.getEnergyData(this.props.userData.EnergyData)[this.state.index],shouldShowChart:"true"})})})})}),Object(g.jsxs)("div",{className:"card-list",children:[Object(g.jsx)(u.a,{className:"card",children:Object(g.jsx)(_.a,{children:Object(g.jsxs)("div",{className:"cardContent",children:[Object(g.jsx)("strong",{style:{fontSize:"xxx-large"},children:"59kwh"}),Object(g.jsx)("div",{children:"Your Total Usage Last Month"}),Object(g.jsx)("div",{})]})})}),Object(g.jsx)(u.a,{className:"card",children:Object(g.jsx)(_.a,{children:Object(g.jsxs)("div",{className:"cardContent",children:[Object(g.jsx)("strong",{style:{fontSize:"xxx-large"},children:"24kwh"}),Object(g.jsx)("div",{children:"Average Total Usage Per Area"}),Object(g.jsx)("div",{})]})})})]})]})}}]),a}(l.a.Component),B=a(83),G=a(13);a(113);var K=function(){var t=function(){var t=Object(s.useState)(function(){var t=localStorage.getItem("UserID"),e=JSON.parse(t);return null===e||void 0===e?void 0:e.UserID}()),e=Object(i.a)(t,2),a=e[0],l=e[1];return{setToken:function(t){t?(localStorage.setItem("token",JSON.stringify(t)),l(t)):(localStorage.clear(),l(null))},token:a}}(),e=t.token,a=t.setToken,l={userData:{}};return console.log("token app:",e),(null===e||void 0===e?void 0:e.UserID)?e?(l={userData:e},console.log("Token Login:",e),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(w,{setToken:a,userData:l.userData}),Object(g.jsx)(z,{userData:l.userData})]})):Object(g.jsx)(B.a,{children:Object(g.jsxs)(G.c,{children:[Object(g.jsx)(G.a,{path:"/login",element:Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(p,{setToken:a})})}),Object(g.jsx)(G.a,{path:"/",element:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(w,{setToken:a,userData:l.userData}),Object(g.jsx)(z,{userData:l.userData})]})})]})}):Object(g.jsx)(p,{setToken:a})},q=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,191)).then((function(e){var a=e.getCLS,s=e.getFID,l=e.getFCP,n=e.getLCP,c=e.getTTFB;a(t),s(t),l(t),n(t),c(t)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(g.jsx)(K,{}),document.getElementById("root")),q(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[114,1,2]]]);
//# sourceMappingURL=main.bac25799.chunk.js.map